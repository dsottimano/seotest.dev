<p style="margin-top:50px;"></p>
<div class="columns">
  <div class="column is-2 is-divider-vertical">
    <aside class="is-medium menu">
      <p class="menu-label">
        TEST CATEGORIES
      </p>
      <ul class="menu-list">
        <li><a href="/indexing"><i class="fab fa-css3-alt"></i> Indexing</a></li>
        <li><a href="/cloaking"><i class="fab fa-js"></i> Cloaking</a></li>
        
      </ul>
      <p class="menu-label">
        Popular test pages
      </p>
      <ul class="menu-list">
        <li><a class="tag is-white is-medium">Coming soon</a></li>


      </ul>
    </aside>
  </div>
  <!-- content goes here -->
  <div class="column is-10">
    <div class="content is-medium">

      <h3 class=""><span class="icon has-text-info"><i class="fas fa-info-circle"></i></span><b>&nbsp;
          <%= testName %></b></h3>
      <hr />
      <p id="body-description"><%- bodyDescription %></p>
      <div class="is-divider" data-content="OR"></div>
      <hr />
      <h3 class=""><span class="icon has-text-warning"><i class="fas fa-exclamation-triangle"></i></span>&nbsp; Specific
        to this page</h3>
      <ul>
        <li><a href="https://www.google.com/search?q=<%- googleIndex %>" rel="noopener" target="_blank"> Check Google
            index for this page</a> </li>
        <li><a href="https://webcache.googleusercontent.com/search?q=cache:<%- googleIndex %>" rel="noopener"
            target="_blank"> Check Google cache for this page</a> </li>
      </ul>
      <h4>Your Request Headers</h4>
      <div class="table-container">
        <table class="table is-bordered is-striped is-narrow is-hoverable">
          <th>Header</th>
          <th>Value</th>
          <tr>
            <td>IP Address or XFF</td>
            <td><%- ipAddress %></td>
          </tr>
          <tr>
            <td>Host</td>
            <td><%- headers.host %></td>
          </tr>
          <tr>
            <td>User-agent</td>
            <td><%- headers['user-agent'] %></td>
          </tr>
          <tr>
            <td>Accept-language</td>
            <td><%- headers['accept-language'] %></td>
          </tr>
          <tr>
            <td>O/S</td>
            <td id="operating-system"></td>
          </tr>
          <tr>
            <td>Device Screen height</td>
            <td id="screen-height"></td>
          </tr>
          <tr>
            <td>Device screen width</td>
            <td id="screen-width"></td>
          </tr>
          <tr>
            <td>Viewport height</td>
            <td id="viewport-height"></td>
          </tr>
          <tr>
            <td>Viewport width</td>
            <td id="viewport-width"></td>
          </tr>
          <tr>
            <td>Cookies enabled</td>
            <td id="cookies"></td>
          </tr>
          <tr>
            <td>Referer</td>
            <td><%- headers.referer %></td>
          </tr>
        </table>
      </div>

      <h4>Verified Googlebot hits to this page</h4>
      <script>
        const result = fetch('/logs?queryUrl=' + document.location.pathname)
          .then((response) => {
            return response.json();
          })
          .then((data) => {
            console.log(data)
            let jData = JSON.stringify(data)
            let jparse = JSON.parse(jData)
            let template = `
            <div class="table-container">
           <table class="table is-bordered is-striped is-narrow is-hoverable">
            <th>Time</th>
            <th>URI</th>
            <th>Status Code</th>
            <th>Ip address</th>
            <th>User Agent</th>
            `;
            
            for (var i = 0; i < data.length; i++) {
             let d = new Date(data[i].time).toLocaleDateString("en-US")
             let timeDate = d
              template += `
            
            <tr>
            <td>${data[i].time}</td>
            <td>${data[i].url}</td>
            <td>${data[i].statusCode}</td>
            <td>${data[i].remoteAddress}</td>
            <td>${data[i].userAgent}</td>
            
            <td></td>
            </tr>
          `
            }

            template += `  </table>
            </div>`
            document.getElementById("hello").innerHTML = template





          });
      </script>



      <div id="hello"></div>




    </div>
  </div>

</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.getElementById("operating-system").innerText = window.navigator.appVersion;
    document.getElementById("screen-height").innerText = window.screen.availHeight;
    document.getElementById("screen-width").innerText = window.screen.availWidth;
    document.getElementById("viewport-height").innerText = document.documentElement.clientHeight;
    document.getElementById("viewport-width").innerText = document.documentElement.clientWidth;
    document.getElementById("cookies").innerText = navigator.cookieEnabled;
  })
</script>